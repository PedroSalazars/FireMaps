<ion-content>

  <!-- Topbar -->
  <div class="notif-topbar">
    <div class="topbar-title">{{ 'NOTIFICATIONS.TITLE' | translate }}</div>
  </div>

  <!-- Contenido principal -->
  <div class="notif-wrapper">
    <div class="notif-inner">

      <h2 class="section-title">{{ 'NOTIFICATIONS.REPORTED_INCIDENTS' | translate }}</h2>
      <p class="section-subtitle">
        {{ 'NOTIFICATIONS.SUBTITLE' | translate }}
      </p>

      <!-- Lista de incidentes -->
      <div *ngIf="incidentes.length > 0; else emptyState" class="cards-list">
        <div class="incident-card" *ngFor="let incidente of incidentes">
          <!-- Cabecera de la tarjeta -->
          <div class="incident-header">
            <div
              class="incident-type"
              [ngClass]="(incidente.type || '').toLowerCase()"
            >
              <ion-icon name="alert-circle"></ion-icon>
              <span>{{ incidente.type || ( 'NOTIFICATIONS.DEFAULT_TYPE' | translate ) }}</span>
            </div>

            <div class="incident-pill">
              {{ incidente.priority || ( 'NOTIFICATIONS.DEFAULT_PRIORITY' | translate ) }}
            </div>
          </div>

          <!-- Contenido principal -->
          <div class="incident-body">
            <div class="incident-field">
              <span class="label">{{ 'NOTIFICATIONS.ADDRESS' | translate }}:</span>
              <span class="value">
                {{ incidente.address || ( 'NOTIFICATIONS.NO_ADDRESS' | translate ) }}
              </span>
            </div>
            <div class="incident-field">
              <span class="label">{{ 'NOTIFICATIONS.STATUS' | translate }}:</span>
              <span class="value">
                {{ incidente.status || ( 'NOTIFICATIONS.PENDING' | translate ) }}
              </span>
            </div>
            <div class="incident-field">
              <span class="label">{{ 'NOTIFICATIONS.DATE' | translate }}:</span>
              <span class="value">
                {{ incidente.createdAt?.seconds * 1000 | date:'short' }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Estado vacÃ­o -->
      <ng-template #emptyState>
        <div class="empty-state">
          <ion-icon name="notifications-off"></ion-icon>
          <p>{{ 'NOTIFICATIONS.EMPTY' | translate }}</p>
        </div>
      </ng-template>

    </div>
  </div>

</ion-content>

<!-- NAV INFERIOR -->
<div class="bottom-nav-shell">
  <div class="bottom-nav-mini">
    <button
      class="bottom-nav-mini-item bottom-nav-mini-item--active"
      (click)="goToNotificaciones()"
    >
      <ion-icon name="notifications-outline"></ion-icon>
      <span>{{ 'FOOTER.NOTIFICATIONS' | translate }}</span>
    </button>

    <button
      class="bottom-nav-mini-item"
      (click)="goToHome()"
    >
      <ion-icon name="home-outline"></ion-icon>
      <span>{{ 'FOOTER.HOME' | translate }}</span>
    </button>

    <button
      class="bottom-nav-mini-item"
      (click)="goToAjustes()"
    >
      <ion-icon name="settings-outline"></ion-icon>
      <span>{{ 'FOOTER.SETTINGS' | translate }}</span>
    </button>
  </div>
</div>
